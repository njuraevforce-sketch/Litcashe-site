    <!DOCTYPE html>
    <html lang="ru">
    <head>
      <meta charset="utf-8"/>
      <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
      <title>Кабинет — Litcash</title>
      <style>
:root{
  --bg:#0f1115;
  --bg-2:#0b0e13;
  --card:#161a22;
  --muted:#8d96a7;
  --text:#e6e9ef;
  --accent:#00eaff;
  --accent-2:#1e88e5;
  --success:#17c964;
  --danger:#ef4444;
  --warning:#f59e0b;
  --radius:16px;
  --shadow:0 8px 30px rgba(0,0,0,.35);
}
*{box-sizing:border-box}
html,body{ display:flex; flex-direction: column; min-height:100vh; height:100%}
body{ display:flex; flex-direction: column; min-height:100vh; 
  margin:0;
  background:
    radial-gradient(1200px 600px at -10% -30%, rgba(30,136,229,.15), transparent 55%),
    radial-gradient(900px 400px at 110% 10%, rgba(0,234,255,.15), transparent 60%),
    linear-gradient(180deg, var(--bg-2), var(--bg));
  color:var(--text);
  font:15px/1.6 "Inter", system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
}
a{color:var(--text); text-decoration:none}
.container{
  width:min(1200px, 92vw);
  margin:0 auto;
  padding:24px 0;
}
.card{
  background:linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
  border:1px solid rgba(255,255,255,.08);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  padding:20px;
  backdrop-filter: blur(6px);
}
h1,h2,h3{margin:0 0 10px}
h1{font-size:clamp(26px, 3.6vw, 40px)}
h2{font-size:clamp(20px, 2.6vw, 26px)}
h3{font-size:18px}
p.muted, .muted{color:var(--muted)}
.btn{
  display:inline-flex; align-items:center; justify-content:center;
  gap:10px;
  height:42px; padding:0 16px;
  border-radius:12px; border:1px solid rgba(255,255,255,.12);
  background:linear-gradient(180deg, rgba(0,234,255,.18), rgba(30,136,229,.18));
  color:white; font-weight:600; letter-spacing:.2px;
  cursor:pointer; transition:transform .15s ease, box-shadow .2s ease, background .2s ease;
  box-shadow:0 6px 18px rgba(30,136,229,.25);
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 24px rgba(30,136,229,.35); }
.btn.ghost{
  background:transparent; border-color:rgba(255,255,255,.12);
  box-shadow:none; color:var(--text);
}
.btn.danger{ background:linear-gradient(180deg, rgba(239,68,68,.25), rgba(185,28,28,.25)); border-color:rgba(239,68,68,.35) }
.btn.success{ background:linear-gradient(180deg, rgba(23,201,100,.25), rgba(6,95,70,.25)); border-color:rgba(23,201,100,.35) }
.btn.small{ height:34px; padding:0 12px; border-radius:10px; font-size:13px }
.input, select, textarea{
  width:100%; height:42px; padding:0 12px; border-radius:12px;
  border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.03); color:var(--text);
  outline:none; transition:border-color .2s ease, box-shadow .2s ease;
}
textarea{ height:120px; padding:12px; resize:vertical }
.input:focus, select:focus, textarea:focus{ border-color:var(--accent); box-shadow:0 0 0 3px rgba(0,234,255,.15) }
.flex{ display:flex; align-items:center; gap:12px }
.grid{ display:grid; gap:16px }
.grid-2{ grid-template-columns: repeat(2, minmax(0,1fr)) }
.grid-3{ grid-template-columns: repeat(3, minmax(0,1fr)) }
@media (max-width: 900px){
  .grid-2, .grid-3{ grid-template-columns: 1fr }
}

/* Header / Nav */
.header{
  position:sticky; top:0; z-index:50;
  backdrop-filter:saturate(180%) blur(8px);
  background:rgba(10,12,18,.6);
  border-bottom:1px solid rgba(255,255,255,.08);
}
.nav{
  display:flex; align-items:center; justify-content:space-between;
  padding:14px 0;
}
.brand{
  display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.4px;
  color:white;
}
.brand .logo{ width:28px; height:28px; border-radius:8px; background:linear-gradient(135deg, var(--accent), var(--accent-2)); box-shadow:0 6px 18px rgba(0,234,255,.45) }
.nav-links{ display:flex; align-items:center; gap:14px }
.nav-links a{ padding:8px 12px; border-radius:10px; color:#cfe9ff; font-weight:600; opacity:.9 }
.nav-links a.active, .nav-links a:hover{ background:rgba(0,234,255,.12); color:white }
.nav-cta{ display:flex; align-items:center; gap:10px }
.lang{
  position:relative;
}
.lang-btn{
  height:38px; padding:0 12px; border-radius:10px; border:1px solid rgba(255,255,255,.12);
  background:rgba(255,255,255,.04); color:white; cursor:pointer;
}
.lang-menu{
  position:absolute; right:0; top:44px; min-width:150px; display:none;
  background:rgba(20,24,32,.96); border:1px solid rgba(255,255,255,.12);
  border-radius:12px; overflow:hidden; box-shadow:var(--shadow);
}
.lang-menu a{ display:block; padding:10px 12px; color:#cfe9ff; }
.lang-menu a:hover{ background:rgba(0,234,255,.12); color:white }
.hamburger{ display:none; }
@media (max-width: 960px){
  .nav-links{ display:none }
  .hamburger{ display:flex; align-items:center; gap:8px }
  .drawer{ position:fixed; inset:0 0 0 auto; width:min(360px, 86vw); background:rgba(12,14,20,.98); border-left:1px solid rgba(255,255,255,.08); transform:translateX(100%); transition:transform .25s ease; z-index:60; }
  .drawer.open{ transform:translateX(0) }
  .drawer .links{ display:flex; flex-direction:column; padding:24px; gap:10px }
  .drawer .links a{ padding:12px; border-radius:12px }
}


/* Drawer (mobile nav) — hidden by default */
.drawer{
  position:fixed;
  inset:0 0 0 auto;
  width:min(360px, 86vw);
  background:rgba(12,14,20,.98);
  border-left:1px solid rgba(255,255,255,.08);
  transform:translateX(100%);
  transition:transform .25s ease;
  z-index:60;
}
.drawer.open{ transform:translateX(0) }
.drawer .links{ display:flex; flex-direction:column; padding:24px; gap:10px }

/* Footer */
.footer{ margin-top:auto; 
  border-top:1px solid rgba(255,255,255,.08);
  margin-top:40px; padding:26px 0; color:#b7c3d6; font-size:14px;
}

/* Hero */
.hero{
  padding:48px 0 10px;
  display:grid; gap:22px; align-items:center;
  grid-template-columns: 1.3fr 1fr;
}
.hero .title{ font-weight:900; letter-spacing:.2px }
.hero .subtitle{ color:#cfe9ff }
.hero .badge{
  display:inline-flex; align-items:center; gap:8px; height:28px; padding:0 10px; font-size:12px;
  border-radius:999px; background:rgba(0,234,255,.12); color:#cfe9ff; border:1px solid rgba(0,234,255,.25);
}
.hero .card{ padding:24px }
.kpis{ display:grid; grid-template-columns: repeat(3,1fr); gap:12px }
.kpi{ background:rgba(255,255,255,.03); border:1px dashed rgba(255,255,255,.1); border-radius:14px; padding:14px }
.kpi .n{ font-size:22px; font-weight:800 }
@media (max-width: 960px){
  .hero{ grid-template-columns:1fr; padding-top:24px }
}

/* Tables */
.table{ width:100%; border-collapse:separate; border-spacing:0 10px }
.table th, .table td{ padding:12px 14px; text-align:left }
.table tr{ background:rgba(255,255,255,.04) }
.table tr td:first-child, .table tr th:first-child{ border-radius:12px 0 0 12px }
.table tr td:last-child, .table tr th:last-child{ border-radius:0 12px 12px 0 }
.badge{ padding:4px 8px; border-radius:10px; font-size:12px; border:1px solid rgba(255,255,255,.12) }

/* Utilities */
.center{ display:flex; align-items:center; justify-content:center }
.right{ margin-left:auto }
.spacer{ height:20px }
hr{ border:none; border-top:1px solid rgba(255,255,255,.08); margin:16px 0 }
</style>
      <script>
const i18n = {
  en: { nav_home:"Home", nav_dashboard:"Dashboard", nav_deposit:"Deposit", nav_withdraw:"Withdraw", nav_faq:"FAQ", nav_settings:"Settings", nav_login:"Login", nav_register:"Register", nav_logout:"Logout",
        hero_title:"Earn USDT by watching short videos", hero_sub:"Activate your account with a 29 USDT top-up and start earning. Multi-level referral rewards: 13% / 5% / 1%.",
        get_started:"Get started", learn_more:"Learn more", kpi_users:"Active users", kpi_payouts:"Total payouts", kpi_apr:"Potential APR", dash_title:"My dashboard",
        balance:"Balance", start:"Start", views:"Views", progress_to_pct:"Progress to 1%", referral_link:"Your referral link", copy:"Copy", copied:"Copied!",
        deposit_title:"Deposit USDT (TRC20)", withdraw_title:"Withdraw USDT (TRC20)", settings_title:"Settings", faq_title:"FAQ" },
  ru: { nav_home:"Главная", nav_dashboard:"Личный кабинет", nav_deposit:"Пополнение", nav_withdraw:"Вывод", nav_faq:"FAQ", nav_settings:"Настройки", nav_login:"Вход", nav_register:"Регистрация", nav_logout:"Выйти",
        hero_title:"Зарабатывай USDT за просмотр коротких видео", hero_sub:"Активируй аккаунт пополнением от 29 USDT и начинай зарабатывать. Реферальные уровни: 13% / 5% / 1%.",
        get_started:"Начать", learn_more:"Подробнее", kpi_users:"Активные пользователи", kpi_payouts:"Выплаты", kpi_apr:"Потенциальный APR", dash_title:"Мой кабинет",
        balance:"Баланс", start:"Старт", views:"Просмотров", progress_to_pct:"Прогресс до 1%", referral_link:"Ваша реферальная ссылка", copy:"Копировать", copied:"Скопировано!",
        deposit_title:"Пополнение USDT (TRC20)", withdraw_title:"Вывод USDT (TRC20)", settings_title:"Настройки", faq_title:"FAQ" }
};

const App = {
  state: { lang: localStorage.getItem("lang") || "ru", auth: JSON.parse(localStorage.getItem("auth") || "false"), user: JSON.parse(localStorage.getItem("user") || "{}") },
  t(k){ return i18n[this.state.lang]?.[k] || k },
  setLang(lang){ this.state.lang=lang; localStorage.setItem("lang",lang); this.applyI18n(); this.closeLangMenu(); },
  injectShell(active=""){
    // Create or reuse shell
    let shell = document.getElementById("app-shell");
    const isAuthed = !!this.state.auth;
    const navLinks = `
      <a id="nav-home" href="index_single.html">`+this.t("nav_home")+`</a>
      <a id="nav-dashboard" href="dashboard_single.html">`+this.t("nav_dashboard")+`</a>
      <a id="nav-deposit" href="deposit_single.html">`+this.t("nav_deposit")+`</a>
      <a id="nav-withdraw" href="withdraw_single.html">`+this.t("nav_withdraw")+`</a>
      <a id="nav-faq" href="faq_single.html">`+this.t("nav_faq")+`</a>
      <a id="nav-settings" href="settings_single.html">`+this.t("nav_settings")+`</a>`;
    const authLinks = !isAuthed
      ? `<a id="nav-login" class="btn ghost" href="login_single.html">`+this.t("nav_login")+`</a>
         <a id="nav-register" class="btn" href="register_single.html">`+this.t("nav_register")+`</a>`
      : `<button id="nav-logout" class="btn danger">`+this.t("nav_logout")+`</button>`;

    const ensureFooter = ()=>{
      if(document.querySelector("footer.footer")) return;
      const footer = document.createElement("footer");
      footer.className = "footer";
      const year = new Date().getFullYear();
      footer.innerHTML = `<div class="container flex" style="justify-content:space-between; gap:12px; flex-wrap:wrap">
        <div>© ${year} Litcash — All rights reserved</div>
        <div class="muted">Support: support@litcash.app</div>
      </div>`;
      document.body.append(footer); // append after content (body is flex; footer will sit at bottom)
    };

    if(!shell){
      shell = document.createElement("div"); shell.id="app-shell"; document.body.prepend(shell);
      const header = document.createElement("header");
      header.className="header";
      header.innerHTML = `
        <div class="container nav">
          <a class="brand" href="index_single.html"><span class="logo"></span><span>Litcash</span></a>
          <nav class="nav-links">${navLinks}</nav>
          <div class="nav-cta">
            <div class="lang">
              <button class="lang-btn" id="langBtn">🌐 `+this.state.lang.toUpperCase()+`</button>
              <div class="lang-menu" id="langMenu">
                <a data-lang="ru">🇷🇺 Русский</a>
                <a data-lang="en">🇬🇧 English</a>
              </div>
            </div>
            ${authLinks}
            <button class="btn ghost hamburger" id="openDrawer" aria-label="Menu">☰</button>
          </div>
        </div>
        <aside class="drawer" id="drawer">
          <div class="container" style="padding:18px">
            <div class="flex" style="justify-content:space-between">
              <div class="brand"><span class="logo"></span><span>Litcash</span></div>
              <button class="btn small ghost" id="closeDrawer">✕</button>
            </div>
          </div>
          <div class="links">
            ${navLinks}
            ${!isAuthed?`<a class="btn ghost" href="login_single.html" id="nav-login">`+this.t("nav_login")+`</a><a class="btn" href="register_single.html" id="nav-register">`+this.t("nav_register")+`</a>`:`<button class="btn danger" id="drawerLogout">`+this.t("nav_logout")+`</button>`}
            <hr/>
            <div class="flex" style="padding:0 24px 24px">
              <button class="btn small ghost" data-lang="ru">🇷🇺 RU</button>
              <button class="btn small ghost" data-lang="en">🇬🇧 EN</button>
            </div>
          </div>
        </aside>`;
      shell.append(header);

      // handlers once
      document.getElementById("langBtn").addEventListener("click", ()=>{ const m=document.getElementById("langMenu"); m.style.display=(m.style.display==="block"?"none":"block"); });
      document.getElementById("langMenu").addEventListener("click", (e)=>{ const lang=e.target?.dataset?.lang; if(lang){ App.setLang(lang) } });
      document.addEventListener("click", (e)=>{ const menu=document.getElementById("langMenu"); if(menu && !menu.contains(e.target) && e.target.id!=="langBtn"){ menu.style.display="none" }});
      const drawer=document.getElementById("drawer"), open=document.getElementById("openDrawer"), close=document.getElementById("closeDrawer");
      open?.addEventListener("click", ()=> drawer.classList.add("open"));
      close?.addEventListener("click", ()=> drawer.classList.remove("open"));
      drawer?.addEventListener("click", (e)=>{ if(e.target.dataset.lang){ App.setLang(e.target.dataset.lang); drawer.classList.remove("open") } if(e.target.id==="drawerLogout"){ App.logout(); drawer.classList.remove("open") }});
      document.getElementById("nav-logout")?.addEventListener("click", ()=>App.logout());

      // Defer footer append until after page content parsed
      if(document.readyState === "loading"){
        document.addEventListener("DOMContentLoaded", ensureFooter);
      }else{
        ensureFooter();
      }
    }else{
      // only update auth/i18n, not duplicate
      const cta = document.querySelector(".nav-cta");
      if(cta){
        const logout = document.getElementById("nav-logout");
        const login = document.getElementById("nav-login");
        const register = document.getElementById("nav-register");
        if(!!this.state.auth){
          login?.remove(); register?.remove();
          if(!logout){ cta.insertAdjacentHTML("beforeend", `<button id="nav-logout" class="btn danger">`+this.t("nav_logout")+`</button>`); document.getElementById("nav-logout").addEventListener("click", ()=>App.logout()); }
        }else{
          logout?.remove();
          if(!login){ cta.insertAdjacentHTML("beforeend", `<a id="nav-login" class="btn ghost" href="login_single.html">`+this.t("nav_login")+`</a>`); }
          if(!register){ cta.insertAdjacentHTML("beforeend", `<a id="nav-register" class="btn" href="register_single.html">`+this.t("nav_register")+`</a>`); }
        }
      }
      if(!document.querySelector("footer.footer")){
        document.body.append(Object.assign(document.createElement("footer"),{className:"footer",innerHTML:`<div class="container flex" style="justify-content:space-between; gap:12px; flex-wrap:wrap"><div>© ${new Date().getFullYear()} Litcash — All rights reserved</div><div class="muted">Support: support@litcash.app</div></div>`}));
      }
    }
    this.highlightActive(active);
    this.applyI18n();
  },
  highlightActive(active){ ["home","dashboard","deposit","withdraw","faq","settings"].forEach(id=>{ const link=document.querySelector(`#nav-${id}`); if(!link) return; if(id===active) link.classList.add("active"); else link.classList.remove("active"); }); },
  applyI18n(){ document.querySelectorAll("[data-i18n]").forEach(el=> el.textContent = this.t(el.dataset.i18n)); const map={nav_home:"#nav-home",nav_dashboard:"#nav-dashboard",nav_deposit:"#nav-deposit",nav_withdraw:"#nav-withdraw",nav_faq:"#nav-faq",nav_settings:"#nav-settings",nav_login:"#nav-login",nav_register:"#nav-register",nav_logout:"#nav-logout"}; Object.entries(map).forEach(([k,sel])=>{ const el=document.querySelector(sel); if(el) el.textContent=this.t(k) }); const lb=document.getElementById("langBtn"); if(lb) lb.textContent="🌐 "+this.state.lang.toUpperCase(); },
  logout(){ localStorage.removeItem("auth"); localStorage.removeItem("user"); this.state.auth=false; location.href="index_single.html"; },
  closeLangMenu(){ const m=document.getElementById("langMenu"); if(m) m.style.display="none"; },
  initPage(active){ this.injectShell(active); this.applyI18n(); },
  notify(msg){ const n=document.createElement("div"); n.textContent=msg; n.style.cssText="position:fixed; bottom:20px; left:50%; transform:translateX(-50%); background:rgba(0,0,0,.75); color:#fff; padding:10px 14px; border-radius:10px; z-index:80; border:1px solid rgba(255,255,255,.15)"; document.body.append(n); setTimeout(()=>n.remove(),1200); }
};

function initDashboardDemo(){
  const viewsEl=document.getElementById("views");
  const progressEl=document.getElementById("progress");
  const balanceEl=document.getElementById("balance");
  const startBtn=document.getElementById("startBtn");
  if(!viewsEl||!startBtn) return;
  let views=Number(localStorage.getItem("views")||0);
  let balance=Number(localStorage.getItem("balance")||0);
  const userEarningPerPercent=1, baseAmount=10;
  const render=()=>{ viewsEl.textContent=String(views); progressEl.value=(views%5)*20; balanceEl.textContent=balance.toFixed(2)+" USDT"; };
  render();
  startBtn.addEventListener("click", ()=>{
    views+=1; localStorage.setItem("views", views);
    if(views%5===0){
      const earn=(baseAmount*userEarningPerPercent)/100;
      balance+=earn; localStorage.setItem("balance", balance);
      const l1=earn*.13, l2=earn*.05, l3=earn*.01;
      console.log("Referral payout demo -> L1:", l1.toFixed(4), "L2:", l2.toFixed(4), "L3:", l3.toFixed(4));
      App.notify("+ "+earn.toFixed(2)+" USDT");
      if(window.updateEarningsChart){ window.updateEarningsChart(earn) }
    }
    render();
  });
  const refInput=document.getElementById("refLink");
  const copyBtn=document.getElementById("copyRef");
  if(refInput && copyBtn){
    const uid=(App.state.user?.id)||"demoUser";
    refInput.value=`${location.origin}/register_single.html?ref=${uid}`;
    copyBtn.addEventListener("click", async ()=>{
      try{ await navigator.clipboard.writeText(refInput.value); App.notify(App.t("copied")); }
      catch(e){ refInput.select(); document.execCommand('copy'); App.notify(App.t("copied")); }
    });
  }
}

window.App=App;
</script>
    <style>
/* === Sticky footer + Mobile tweaks (Android/iOS) === */
html, body { height: 100%; }
body { min-height: 100vh; display: flex; flex-direction: column; }
main, .main, #main, .content, .page, .page-wrap { flex: 1 0 auto; }
footer, .footer { margin-top: auto; }

/* iOS font autosize & bounce tweaks */
body { -webkit-text-size-adjust: 100%; }
* { -webkit-tap-highlight-color: rgba(0,0,0,0); }

/* Media queries: safe, non-destructive */
@media (max-width: 1024px) {
  .container, .wrap, .inner, .page, main { padding-left: 12px !important; padding-right: 12px !important; }
}
@media (max-width: 760px) {
  .grid-3, .grid-2, .cols-3, .cols-2, .cards-3, .cards-2 { grid-template-columns: 1fr !important; }
  .card { padding: 16px !important; border-radius: 16px !important; }
  h1.title { font-size: 28px !important; line-height: 1.2 !important; }
  .btn { padding: 10px 14px !important; border-radius: 12px !important; }
}

/* Tables: horizontal scroll on small screens */
@media (max-width: 720px) {
  table { display: block; overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
}

/* Media fit */
img, video, canvas { max-width: 100%; height: auto; }
</style>

<style>.footer{ order:9999 !important; margin-top:auto; }</style>

<style>.noscript-header{display:block} .js-enabled .noscript-header{display:none}</style>

<style>
/* Fallback header language select (mobile-friendly) */
.noscript-header .nav { gap: 10px; }
.noscript-header .lang-select {
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.12);
  color: #fff;
  border-radius: 12px;
  padding: 8px 10px;
}
/* Keep fallback tidy on phones */
@media (max-width: 980px){
  .noscript-header .nav-links { display:none; }
}
</style>
<style>#nav-login,#nav-register{display:none!important}</style>
<style>#nav-login,#nav-register,#m-login,#m-register{display:none!important}</style>

<style>
/* Hide auth links everywhere except home */
#nav-login,#nav-register,#m-login,#m-register,
a[href$="login_single.html"], a[href$="register_single.html"],
a[href*="/login_single.html"], a[href*="/register_single.html"] { display:none !important; }
</style>

<style>
/* Move language switcher to the far right on inner pages */
.header .lang, .noscript-header .lang, .header .language-switcher { margin-left: auto !important; }
.header .nav-cta { display: flex !important; gap: 10px; margin-left: auto !important; } /* hide empty auth box on inner pages */
</style>

<style>
/* Keep language switcher visible and right-aligned on inner pages */
.header .lang, .noscript-header .lang, .header .language-switcher { margin-left: auto !important; }
</style>
</head>
    <body>
<script>document.documentElement.classList.add('js-enabled');</script>
<header class="header noscript-header">
  <div class="container nav">
    <a class="brand" href="index_single.html"><span class="logo"></span><span>Litcash</span></a>
    <nav class="nav-links">
      <a href="index_single.html">Главная</a>
      <a href="dashboard_single.html">Личный кабинет</a>
      <a href="deposit_single.html">Пополнение</a>
      <a href="withdraw_single.html">Вывод</a>
      <a href="faq_single.html">FAQ</a>
      <a href="settings_single.html">Настройки</a>
    </nav>
    <div class="lang"><select id="langSelect" class="lang-select"><option value="ru">RU</option><option value="en">EN</option><option value="uz">UZ</option><option value="tr">TR</option><option value="ar">AR</option></select></div><div class="nav-cta">
      <a class="btn ghost" href="login_single.html">Вход</a>
      <a class="btn primary" href="register_single.html">Регистрация</a>
    </div>
  </div>
</header>

    <script>App.initPage("dashboard")</script>

    </head>
    <body>
    <script>App.initPage("dashboard")</script>

    </head>
    <body>
    <script>App.initPage("dashboard")</script>

    </head>
    <body>
    <script>App.initPage("dashboard")</script>


<section class="container grid grid-3" style="padding-top:26px">
  <div class="card">
    <h2 data-i18n="dash_title">Мой кабинет</h2>
    <div class="spacer"></div>
    <div class="grid grid-2">
      <div class="card" style="background:rgba(255,255,255,.03)">
        <div class="muted" data-i18n="balance">Баланс</div>
        <div id="balance" style="font-weight:800; font-size:24px">0.00 USDT</div>
      </div>
      <div class="card" style="background:rgba(255,255,255,.03)">
        <div class="muted" data-i18n="views">Просмотров</div>
        <div style="display:flex; align-items:center; gap:12px">
          <div id="views" style="font-weight:800; font-size:24px">0</div>
          <progress id="progress" max="100" value="0" style="height:10px; width:100%"></progress>
        </div>
        <div class="muted" data-i18n="progress_to_pct">Прогресс до 1%</div>
      </div>
    </div>
    <div class="spacer"></div>
    <button id="startBtn" class="btn" data-i18n="start">Старт</button>
<div class="level-wrap" style="margin-top:8px">
  <div id="levelInfo" style="opacity:.85">Уровень: — / Ставка: — / База: —</div>
  <div id="lastPayout" style="opacity:.75">Последнее начисление: 0.000000 USDT</div>
</div>

  </div>
  <div class="card">
    <h3 data-i18n="referral_link">Ваша реферальная ссылка</h3>
    <div class="flex" style="gap:8px; margin-top:10px">
      <input id="refLink" class="input" readonly/>
      <button id="copyRef" class="btn small" data-i18n="copy">Копировать</button>
    </div>
    <p class="muted" style="margin-top:10px">Начисления: 13% / 5% / 1% от дохода ваших уровней (без бонуса за регистрацию).</p>
  </div>
  <div class="card">
    <h3>Доход</h3>
    <div class="muted">Обновляется при каждом полном проценте (каждые 5 просмотров).</div>
    <div id="miniChartHolder" style="height:160px"></div>
  </div>
</section>
<section class="container card">
  <h3>Реферальная сеть</h3>
  <table class="table">
    <thead><tr><th>Пользователь</th><th>Уровень</th><th>Статус</th><th>Заработок для меня</th></tr></thead>
    <tbody>
      <tr><td>@alice</td><td><span class="badge">1</span></td><td><span class="badge" style="border-color:rgba(23,201,100,.35)">Активен</span></td><td>12.40 USDT</td></tr>
      <tr><td>@bob</td><td><span class="badge">2</span></td><td><span class="badge">Неактивен</span></td><td>0.00 USDT</td></tr>
      <tr><td>@carol</td><td><span class="badge">3</span></td><td><span class="badge" style="border-color:rgba(23,201,100,.35)">Активен</span></td><td>1.11 USDT</td></tr>
    </tbody>
  </table>
</section>
<script>
  initDashboardDemo();
  const holder = document.getElementById("miniChartHolder");
  const canvas = document.createElement("canvas"); canvas.width=holder.clientWidth; canvas.height=160; holder.append(canvas);
  const ctx = canvas.getContext("2d");
  const points = [0];
  function redraw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.lineWidth = 2; ctx.strokeStyle = "rgba(30,136,229,.9)";
    ctx.beginPath();
    const step = canvas.width / Math.max(1, points.length-1);
    points.forEach((v,i)=>{
      const x = i*step;
      const y = canvas.height - v*8 - 10;
      i?ctx.lineTo(x,y):ctx.moveTo(x,y);
    });
    ctx.stroke();
  }
  window.updateEarningsChart = (v)=>{ points.push((points.at(-1)||0)+v); redraw() };
  redraw();
</script>





    
<script>
// basic lang selector (shared for both headers)
(function(){
  try{
    var sel = document.getElementById('langSelect');
    var saved = (localStorage.getItem('lang')||'ru');
    if(sel){ sel.value = saved; sel.addEventListener('change', function(){
      localStorage.setItem('lang', this.value);
      var u = new URL(window.location.href);
      u.searchParams.set('lang', this.value);
      window.location.href = u.toString();
    }); }
  }catch(e){}
})();
</script>
<script src="i18n.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="scripts/supabaseConfig.js"></script>
<script src="scripts/app_supabase.js"></script>

<!-- Video Viewer Modal -->
<style>
#viewerOverlay{position:fixed;inset:0;background:rgba(0,0,0,.86);backdrop-filter:blur(6px);display:none;z-index:99999;align-items:center;justify-content:center;padding:16px}
#viewerBox{width:min(920px,96vw);background:#0b0f16;border:1px solid rgba(255,255,255,.08);border-radius:16px;box-shadow:0 10px 40px rgba(0,0,0,.5);overflow:hidden}
#viewerHeader{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
#viewerTitle{color:#e6e9ef;font-weight:700}
#viewerClose{appearance:none;border:0;background:transparent;color:#9aa3af;font-size:20px;cursor:not-allowed;opacity:.6}
#viewerBody{padding:12px 16px}
#viewerVideo{width:100%;max-height:54vh;background:#000;border-radius:10px}
#viewerTimer{margin-top:10px;height:10px;background:rgba(255,255,255,.08);border-radius:8px;overflow:hidden}
#viewerTimer>div{height:100%;width:0;background:linear-gradient(90deg,#00eaff,#1e88e5)}
#viewerInfo{display:flex;gap:10px;justify-content:space-between;margin-top:10px;color:#9aa3af;font-size:14px}
@media (max-width:600px){#viewerBody{padding:10px}#viewerHeader{padding:10px}#viewerTitle{font-size:14px}}
</style>
<div id="viewerOverlay" role="dialog" aria-modal="true">
  <div id="viewerBox">
    <div id="viewerHeader">
      <div id="viewerTitle">Просмотр видео</div>
      <button id="viewerClose" title="Доступно после завершения">✕</button>
    </div>
    <div id="viewerBody">
      <video id="viewerVideo" playsinline webkit-playsinline controlslist="nodownload noplaybackrate">
        <!-- Если кнопка Start содержит data-video-src — подставим его -->
      </video>
      <div id="viewerTimer"><div></div></div>
      <div id="viewerInfo">
        <div>Осталось: <span id="viewerCount">30</span> сек</div>
        <div>После просмотра начислим 1/5 от процента по уровню</div>
      </div>
    </div>
  </div>
</div>
<script>
(() => {
  const $ = s => document.querySelector(s);
  const overlay = $('#viewerOverlay');
  const video   = $('#viewerVideo');
  const close   = $('#viewerClose');
  const bar     = $('#viewerTimer > div');
  const count   = $('#viewerCount');
  const title   = $('#viewerTitle');
  const startBtn = document.getElementById('startBtn');

  if (!startBtn || !overlay) return;

  let timer = null, secs = 30, awarding = false;

  function openViewer(src){
    awarding = false; let total = secs;
    bar.style.width = '0%'; count.textContent = total;
    close.disabled = true; close.style.cursor = 'not-allowed'; close.style.opacity = .6;
    overlay.style.display = 'flex';
    // Setup video if provided
    if (src){
      video.src = src;
      video.currentTime = 0;
      video.muted = false;
      video.controls = true;
      video.play().catch(()=>{});
    } else {
      video.removeAttribute('src'); video.load();
    }
    startCountdown(total);
  }

  function startCountdown(total){
    clearInterval(timer);
    const started = Date.now();
    timer = setInterval(() => {
      const elapsed = Math.floor((Date.now() - started)/1000);
      const left = Math.max(0, total - elapsed);
      count.textContent = left;
      const pct = Math.min(100, ((total-left)/total)*100);
      bar.style.width = pct + '%';
      if (left <= 0){
        clearInterval(timer);
        onCompleted();
      }
    }, 300);
  }

  async function onCompleted(){
    if (awarding) return;
    awarding = true;
    title.textContent = 'Начисляем вознаграждение...';
    try {
      const { sb, getUserOrRedirect } = window.authHelpers || {};
      const user = await getUserOrRedirect && await getUserOrRedirect('login_single.html');
      if (!user) throw new Error('not auth');
      const { data, error } = await sb.rpc('award_view');
      if (error) throw error;
      const row = data && data[0] || {};
      title.textContent = `Зачислено: ${(Number(row.amount||0)).toFixed(6)} USDT`;
      try {
        const last = document.getElementById('lastPayout');
        if (last) last.textContent = `Последнее начисление: ${(Number(row.amount||0)).toFixed(6)} USDT`;
        const lvl = document.getElementById('levelInfo');
        if (lvl) lvl.textContent = `Уровень: ${(row.user_level||'').toString().toUpperCase()} / Ставка: ${Number(row.rate||0)}% / База: ${Number(row.base||0).toFixed(2)} USDT`;
        // обновим прогресс-бар "Просмотров до 1%"
        const progress = document.getElementById('progress');
        const views = document.getElementById('views');
        if (progress && views){
          const current = Number(views.textContent||'0') + 1;
          views.textContent = String(current);
          const val = Math.min(100, (current % 5) * 20);
          progress.value = val;
        }
      } catch (_){}
    } catch (e){
      title.textContent = 'Ошибка начисления';
      alert(e.message || e);
    } finally {
      close.disabled = false; close.style.cursor = 'pointer'; close.style.opacity = 1;
      close.title = 'Закрыть';
    }
  }

  close?.addEventListener('click', () => {
    if (close.disabled) return;
    overlay.style.display = 'none';
    if (!video.paused) try { video.pause(); } catch(_){}
  });

  startBtn.addEventListener('click', () => {
    const src = startBtn.getAttribute('data-video-src') || '';
    openViewer(src);
  });
})();
</script>


<script>
document.addEventListener('DOMContentLoaded', async () => {
  try {
    const { sb, getUserOrRedirect } = window.authHelpers || {};
    if (!sb) return;
    const user = await getUserOrRedirect && await getUserOrRedirect('login_single.html');
    if (!user) return;
    const { data, error } = await sb.rpc('compute_level', { p_user: user.id });
    if (!error && data && data[0]) {
      const r = data[0];
      const lvl = document.getElementById('levelInfo');
      if (lvl) lvl.textContent = `Уровень: ${String(r.level||'').toUpperCase()} / Ставка: ${Number(r.level_rate||0)}% / База: ${Number(r.level_cap||0).toFixed(2)} USDT`;
    }
  } catch (_){}
});
</script>


<script type="module" src="litcash-supabase.js"></script>
</body>
    </html>
