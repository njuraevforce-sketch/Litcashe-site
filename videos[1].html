
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Watch Ads ‚Äì Litcash</title>
  <script src="https://cdn.tailwindcss.com">
function goToCabinet() {
  window.location.href = "cabinet.html";
}

function showToast(amount) {
  const toast = document.getElementById("rewardToast");
  document.getElementById("toastAmount").innerText = amount.toFixed(2);
  toast.classList.remove("hidden");
  setTimeout(() => toast.classList.add("hidden"), 3000);
}

</script>
</head>
<body class="bg-slate-900 text-white font-sans min-h-screen flex flex-col">

<header class="p-4 bg-gray-800 flex justify-between items-center shadow">
  <h1 class="text-xl font-bold text-blue-400">Litcash</h1>
  <a href="cabinet.html" class="text-sm text-gray-300 hover:underline">‚Üê Back to Cabinet</a>
</header>

<main class="flex-grow p-6 flex flex-col items-center">
  <div class="max-w-xl w-full">
    <h2 class="text-2xl font-bold mb-6 text-center">Watch and Earn</h2>

    <div id="infoPanel" class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6 text-center">
      <div class="bg-gray-800 p-4 rounded">
        <p class="text-sm text-gray-400">Your Level</p>
        <p id="infoLevel" class="text-xl font-semibold text-blue-300">-</p>
      </div>
      <div class="bg-gray-800 p-4 rounded">
        <p class="text-sm text-gray-400">Reward %</p>
        <p id="infoPercent" class="text-xl font-semibold text-green-300">-</p>
      </div>
      <div class="bg-gray-800 p-4 rounded">
        <p class="text-sm text-gray-400">Earned Today</p>
        <p id="infoEarned" class="text-xl font-semibold text-yellow-300">0.00 USDT</p>
      </div>
    </div>

    <div id="startSection" class="text-center mb-6">
      <button onclick="startWatching()" class="bg-blue-600 hover:bg-blue-700 px-8 py-4 text-white text-lg rounded-full shadow transition">
        ‚ñ∂Ô∏è Start Watching (5 Videos)
      </button>
    </div>

    <div id="videoSection" class="hidden">
      <video id="videoPlayer" class="w-full rounded shadow-lg mb-4" controls></video>

      <button id="nextBtn" onclick="playNextVideo()" class="hidden mb-4 w-full bg-blue-700 hover:bg-blue-800 text-white py-2 rounded-lg">‚ñ∂Ô∏è Next Video</button>
    <div class="flex justify-center space-x-2 mb-4" id="progressDots">
        <span class="dot bg-gray-600 w-3 h-3 rounded-full inline-block"></span>
        <span class="dot bg-gray-600 w-3 h-3 rounded-full inline-block"></span>
        <span class="dot bg-gray-600 w-3 h-3 rounded-full inline-block"></span>
        <span class="dot bg-gray-600 w-3 h-3 rounded-full inline-block"></span>
        <span class="dot bg-gray-600 w-3 h-3 rounded-full inline-block"></span>
      </div>
    </div>
  </div>
</main>

<footer class="bg-gray-900 p-4 text-center text-sm text-gray-500">
  ¬© 2025 Litcash. All rights reserved.
</footer>

<script>
const videoSources = [
  "ad1.mp4",
  "ad2.mp4",
  "ad3.mp4",
  "ad4.mp4",
  "ad5.mp4"
];

let current = 0;
let partialReward = 0;

const user = JSON.parse(localStorage.getItem("current_user")) || {};
const today = new Date().toISOString().slice(0, 10);


const level = parseInt(user.level || 1);
const balance = parseFloat(user.balance || 0);
const percentTable = {1: 3, 2: 3.5, 3: 4, 4: 4.5, 5: 5};
const rewardPercent = percentTable[level] || 3;
const totalReward = balance * (rewardPercent / 100);
const rewardPerVideo = totalReward / 5;

document.getElementById("infoLevel").innerText = "Level " + level;
document.getElementById("infoPercent").innerText = rewardPercent + "%";




function updateDots(index) {
  const dots = document.querySelectorAll(".dot");
  dots.forEach((dot, i) => {
    dot.className = "dot w-3 h-3 rounded-full inline-block " + (i < index ? "bg-green-400" : "bg-gray-600");
  });
}

function startWatching() {
  
  document.getElementById("startSection").classList.add("hidden");
  document.getElementById("videoSection").classList.remove("hidden");
  // wait for user to click Next
}

function playNextVideo() {
  if (current >= videoSources.length) {
    user.balance = balance + partialReward;
    user.earned = (user.earned || 0) + partialReward;
    localStorage.setItem("current_user", JSON.stringify(user));
    alert(`You've earned ${partialReward.toFixed(2)} USDT for watching ads.`);
    window.location.href = "cabinet.html";
    return;
  }

  const player = document.getElementById("videoPlayer");
  player.src = videoSources[current];
  player.load();
  player.play();

  updateDots(current);
  document.getElementById("infoEarned").innerText = (partialReward).toFixed(2) + " USDT";

  player.onended = () => {
    document.getElementById('nextBtn').classList.remove('hidden');
    partialReward += rewardPerVideo;
    showToast(rewardPerVideo);
    current++;
    document.getElementById("infoEarned").innerText = (partialReward).toFixed(2) + " USDT";
    updateDots(current);
    // wait for user to click Next
  };
}

function goToCabinet() {
  window.location.href = "cabinet.html";
}

function showToast(amount) {
  const toast = document.getElementById("rewardToast");
  document.getElementById("toastAmount").innerText = amount.toFixed(2);
  toast.classList.remove("hidden");
  setTimeout(() => toast.classList.add("hidden"), 3000);
}

</script>


<!-- üéâ Modal -->
<div id="rewardModal" class="fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center hidden z-50">
  <div class="bg-gray-800 text-white rounded-xl p-6 max-w-sm w-full text-center shadow-lg animate-pulse">
    <div class="text-5xl mb-4">üéâ</div>
    <h2 class="text-xl font-bold mb-2">Congratulations!</h2>
    <p id="modalRewardText" class="text-lg text-green-300 mb-4"></p>
    <button onclick="goToCabinet()" class="bg-blue-600 hover:bg-blue-700 px-6 py-2 rounded-full text-white text-sm">
      Go to Cabinet
    </button>
  </div>
</div>

<!-- ‚úÖ Toast Notification -->
<div id="rewardToast" class="fixed bottom-6 right-6 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg hidden z-50 text-sm">
  +<span id="toastAmount">0.00</span> USDT credited!
</div>
</body>
</html>
